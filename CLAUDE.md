# CLAUDE.md - 프로젝트 컨텍스트 및 가이드라인

이 파일은 Claude AI가 이 프로젝트를 이해하고 작업할 때 참고하는 컨텍스트 정보입니다.

## 📋 커밋 메시지 가이드라인

### 기본 형식

```
타입: 간단한 제목 (50자 이내)

- 핵심 변경사항 1 (최대 3개만)
- 핵심 변경사항 2
- 핵심 변경사항 3
```

**⚠️ 중요**: 상세 변경사항은 최대 3개까지만 작성하고, 가장 핵심적인 변경사항만 포함합니다. 여러 변경사항이 있는 경우 우선순위가 높은 3개만 선택하여 압축하여 작성합니다.

### 커밋 타입

- `feat`: 새로운 기능 추가
- `fix`: 버그 수정
- `docs`: 문서 수정
- `style`: 코드 스타일 변경 (포맷팅, 세미콜론 등)
- `refactor`: 코드 리팩토링
- `perf`: 성능 개선
- `test`: 테스트 코드 추가/수정
- `chore`: 빌드 설정, 패키지 매니저 설정 등
- `개선`: 기존 기능 개선 (UI/UX, 사용성 등)

### 커밋 메시지 작성 예시

#### 여러 변경사항이 포함된 경우 (핵심 3개만 선택)

```
개선: 시스템 프롬프트 및 UI 개선

- 시스템 프롬프트 개선: 단순 대화에서 도구 사용 방지, 경로 처리 가이드라인 추가
- 불완전한 tool_calls 정리 기능 추가로 히스토리 에러 방지
- 기본 MCP 설정 간소화 및 OpenAI API 키 설정 UI 개선
```

#### 단일 기능 추가

```
feat: 불완전한 tool_calls 정리 기능 추가

- 체크포인터 히스토리에서 대응하는 ToolMessage가 없는 tool_calls 자동 제거
- 쿼리 처리 전 히스토리 검증 및 정리
```

#### 버그 수정

```
fix: Desktop Commander 경로 처리 문제 해결

- 하드코딩된 경로 제거 및 에러 메시지 기반 동적 경로 확인
```

## 🎯 프로젝트별 특이사항

### 파일 구조

- `app.py`: 메인 Streamlit 애플리케이션
- `model_providers.py`: 모델 제공자 추상화 계층
- `utils.py`: 유틸리티 함수 (astream_graph 등)
- `mcp_servers/`: 내장 MCP 서버들
- `mcp_config.json`: MCP 서버 설정 파일

### 주요 기능

- 다중 AI 모델 지원 (OpenAI, AWS Bedrock)
- MCP 서버 동적 추가/관리
- LangGraph를 활용한 ReAct 에이전트
- 실시간 스트리밍 응답

### 주의사항

- Docker 환경에서는 `mcp_config.json` 파일을 볼륨 마운트 권장
- 환경 변수 `MCP_CONFIG_PATH`로 설정 파일 경로 지정 가능
- 기본 설정은 `time` 서버만 포함 (fitness는 수동 추가)

## 📝 작업 시 참고사항

1. **변경사항 확인**: `git diff` 및 `git status`로 변경사항 확인
2. **커밋 메시지 작성**: 위 가이드라인에 따라 타입과 상세 내용 작성
3. **테스트**: 주요 변경사항은 테스트 후 커밋
4. **문서 업데이트**: README.md나 주요 기능 변경 시 문서도 함께 업데이트
